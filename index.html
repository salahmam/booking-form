<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ø³ÙˆØ¯ÙˆÙƒÙˆ â€” Ù…Ø³ØªÙˆÙŠØ§Øª Ù…ØªØ¯Ø±Ø¬Ø© (Ø£Ù„ÙˆØ§Ù† ÙŠÙ„Ø§ Ù„ÙˆØ¯Ùˆ)</title>
  <style>
    :root{
      --bg: #0f0f12;
      --card: #181a1f;
      --ink: #e9eef6;
      --muted: #aeb7c8;
      --accent: #00d8ff;
      --red: #ea3b2d;
      --blue: #2f7bff;
      --green: #27c93f;
      --yellow: #ffcc00;
      --cell: #1f232b;
      --cell-focus: #263043;
      --cell-border: #2f3644;
      --ok: #2bd576;
      --bad: #ff5d5d;
      --btn: #202735;
      --btn-hover: #2a3446;
    }
    *{ box-sizing: border-box; }
    body{
      margin: 0;
      background: var(--bg);
      color: var(--ink);
      font-family: "Tajawal", "Cairo", "Noto Kufi Arabic", system-ui, sans-serif;
      min-height: 100dvh;
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 14px;
    }
    header{display:flex;justify-content:center;align-items:center;padding:16px 12px;position:sticky;top:0;backdrop-filter:blur(8px);}
    .wrap{width:min(1100px,92vw);margin:0 auto;}
    .title{display:flex;gap:10px;align-items:center;justify-content:center;flex-wrap:wrap;}
    .badge{padding:6px 10px;font-weight:700;border-radius:10px;background:linear-gradient(135deg,var(--green),var(--yellow));color:#102312;}
    h1{margin:0;font-weight:800;letter-spacing:.3px;}
    .hud{display:grid;grid-template-columns:1fr auto 1fr;gap:10px;align-items:center;margin-top:14px;}
    select,button{
      background:var(--btn);border:1px solid var(--cell-border);color:var(--ink);
      padding:10px 14px;border-radius:12px;font-size:16px;cursor:pointer;
    }
    .game{display:grid;grid-template-columns:1fr;justify-items:center;gap:18px;margin:8px 0 26px;}
    .board{width:min(92vw,530px);aspect-ratio:1/1;background:#151821;border-radius:18px;
      padding:12px;display:grid;grid-template-columns:repeat(9,1fr);grid-template-rows:repeat(9,1fr);gap:2px;position:relative;}
    .cell{
      display:grid;place-items:center;font-size:clamp(18px,3.2vw,26px);font-weight:800;
      background:var(--cell);border:1px solid var(--cell-border);border-radius:9px;
      text-align:center;color:var(--ink);
    }
    input.cell{caret-color:var(--accent);}
    input.cell::-webkit-inner-spin-button,input.cell::-webkit-outer-spin-button{ -webkit-appearance:none; margin:0;}
    .toolbar{display:flex;gap:10px;justify-content:center;flex-wrap:wrap;}
    .footer{text-align:center;padding:16px;font-size:14px;color:var(--muted);}
  </style>
</head>
<body>
<header>
  <div class="wrap title">
    <span class="badge">Ø³ÙˆØ¯ÙˆÙƒÙˆ</span>
    <h1>ØªØ­Ø¯Ù‘ÙŠ Ø§Ù„Ø£Ù„ÙˆØ§Ù† â€” ÙŠÙ„Ø§ Ù„ÙˆØ¯Ùˆ ğŸ²</h1>
  </div>
</header>
<main class="wrap">
  <div class="hud">
    <div class="controls">
      <label for="level">Ø§Ù„Ù…Ø³ØªÙˆÙ‰:</label>
      <select id="level"></select>
      <label for="stage">Ø§Ù„Ù…Ø±Ø­Ù„Ø©:</label>
      <select id="stage"></select>
    </div>
    <div class="timer" id="timer">00:00</div>
  </div>
  <section class="game">
    <div class="board" id="board"></div>
    <div class="toolbar">
      <button id="btnCheck">ØªØ­Ù‚Ù‘Ù‚</button>
      <button id="btnNext">Ø§Ù„ØªØ§Ù„ÙŠ â®•</button>
      <button id="btnReset">Ø¥Ø¹Ø§Ø¯Ø©</button>
    </div>
    <div id="ad-banner" style="width:100%;text-align:center;margin-top:10px;">
      <!-- Ø¶Ø¹ ÙƒÙˆØ¯ Ø¥Ø¹Ù„Ø§Ù† Google Ù‡Ù†Ø§ -->
      <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-xxxxxxxxxxxxxxx"
        data-ad-slot="1234567890"
        data-ad-format="auto"></ins>
    </div>
  </section>
</main>
<footer class="footer">ØµÙ†Ø¹ Ø¨Ø­Ø¨ â€” Ø£Ù„ÙˆØ§Ù† Ù…Ø³ØªÙˆØ­Ø§Ø© Ù…Ù† <b>Yalla Ludo</b>. Ø¨Ø§Ù„ØªÙˆÙÙŠÙ‚! âœ¨</footer>

<audio id="clickSound" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg"></audio>
<audio id="winSound" src="https://actions.google.com/sounds/v1/cartoon/clang_and_wobble.ogg"></audio>

<script>
const boardEl=document.getElementById("board");
const levelSel=document.getElementById("level");
const stageSel=document.getElementById("stage");
const timerEl=document.getElementById("timer");
const btnCheck=document.getElementById("btnCheck");
const btnNext=document.getElementById("btnNext");
const btnReset=document.getElementById("btnReset");
const clickSound=document.getElementById("clickSound");
const winSound=document.getElementById("winSound");

let SIDE=9, BOX=3;
let currentLevel=1, currentStage=1;
let initialBoard=[], solutionBoard=[];

function playClickSound(){ clickSound.currentTime=0; clickSound.play(); }
function playWinSound(){ winSound.currentTime=0; winSound.play(); }

function buildSelectors(){
  levelSel.innerHTML="";
  for(let l=4;l<=9;l++){
    const opt=document.createElement("option");
    opt.value=l; opt.textContent="Ù…Ø³ØªÙˆÙ‰ "+(l-3);
    levelSel.appendChild(opt);
  }
  stageSel.innerHTML="";
  for(let s=1;s<=10;s++){
    const opt=document.createElement("option");
    opt.value=s; opt.textContent="Ù…Ø±Ø­Ù„Ø© "+s;
    stageSel.appendChild(opt);
  }
}
buildSelectors();

function boxIndex(r,c){ return Math.floor(r/BOX)*BOX+Math.floor(c/BOX); }

function buildBoard(puzzle){
  boardEl.innerHTML="";
  for(let r=0;r<SIDE;r++){
    for(let c=0;c<SIDE;c++){
      const v=puzzle[r][c];
      if(v!==0){
        const div=document.createElement("div");
        div.className="cell";
        div.textContent=v;
        div.dataset.r=r; div.dataset.c=c;
        boardEl.appendChild(div);
      }else{
        const input=document.createElement("input");
        input.className="cell";
        input.type="number"; input.inputMode="numeric"; input.pattern="[0-9]*";
        input.dataset.r=r; input.dataset.c=c;
        input.addEventListener("input",()=>{
          if(input.value.length>1) input.value=input.value.slice(-1);
          playClickSound();
        });
        boardEl.appendChild(input);
      }
    }
  }
}

function newStage(lv,st){
  currentLevel=lv; currentStage=st;
  SIDE=lv; BOX=Math.sqrt(lv)|0;
  // Ù‡Ù†Ø§ Ù…Ù…ÙƒÙ† Ù†ÙˆÙ„Ù‘Ø¯ Ø§Ù„Ø´Ø¨ÙƒØ© Ø¹Ø´ÙˆØ§Ø¦ÙŠØ§Ù‹ (Ù„Ù„ØªØ¨Ø³ÙŠØ· Ù†Ø®Ù„ÙŠÙ‡Ø§ ÙØ§Ø±ØºØ©)
  initialBoard=Array.from({length:SIDE},()=>Array(SIDE).fill(0));
  buildBoard(initialBoard);
}
newStage(4,1);

btnCheck.addEventListener("click",()=>{
  playWinSound();
  alert("ÙÙˆØ² âœ…");
});
btnNext.addEventListener("click",()=>{
  currentStage=currentStage%10+1;
  newStage(SIDE,currentStage);
});
btnReset.addEventListener("click",()=>{ newStage(SIDE,currentStage); });

levelSel.addEventListener("change",(e)=>{
  SIDE=+e.target.value;
  newStage(SIDE,1);
});
stageSel.addEventListener("change",(e)=>{
  newStage(SIDE,+e.target.value);
});
</script>
</body>
</html>"""

